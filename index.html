<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Morning Brief â€“ Osielsko, PL</title>
<meta name="viewport" content="width=device-width,initial-scale=1">
<style>
  body{margin:0;font:16px/1.45 -apple-system,Segoe UI,Roboto,Inter,sans-serif;background:#0f1115;color:#e9eef7}
  a{color:#7cd3ff;text-decoration:none}
  .wrap{max-width:1000px;margin:auto;padding:20px}
  h1{font-size:22px;margin:0 0 10px}
  .card{background:#151923;border-radius:12px;box-shadow:0 10px 25px rgba(0,0,0,.25);padding:14px;margin-bottom:18px}
  .pill{display:inline-block;margin:4px 4px 4px 0;padding:6px 10px;border-radius:999px;background:#0c111b;border:1px solid #1e2532;font-size:14px}
  small{color:#9aa4b2}
  .video{width:50%;max-width:480px;border-radius:10px;display:block;margin:auto;border:1px solid #273144}
  @media(max-width:800px){.video{width:100%}}
</style>
</head>
<body>
<div class="wrap">
  <h1>ğŸŒ… Morning Brief â€“ Osielsko, Poland</h1>

  <div class="card">
    <div id="datetime"></div>
    <div id="weather">
      <span class="pill">ğŸŒ¡ï¸ Temp â€”</span>
      <span class="pill">ğŸ’¨ Wind â€”</span>
      <span class="pill">ğŸŒ§ï¸ Rain â€”</span><br>
      <span class="pill" id="sunrise">ğŸŒ… Sunrise â€”</span>
      <span class="pill" id="sunset">ğŸŒ‡ Sunset â€”</span>
      <span class="pill" id="moon">ğŸŒ™ Moon â€”</span>
    </div>
  </div>

  <div class="card" style="text-align:center">
    <div>â˜ï¸ Europe Satellite Clouds (latest)</div>
    <video class="video" autoplay loop muted playsinline>
      <source src="https://api.met.no/weatherapi/geosatellite/1.4/europe.mp4" type="video/mp4">
    </video>
    <small>Source: MET Norway (EUMETSAT composite)</small>
  </div>

  <div class="card">
    <div>ğŸ“… Next 3-Day Holidays</div>
    <div id="holidays"><small>Loadingâ€¦</small></div>
    <small>Source: nager.at</small>
  </div>
</div>

<script>
(async()=>{
  const loc={lat:53.196,lon:18.066,tz:"Europe/Warsaw"};
  document.getElementById("datetime").textContent=new Date().toLocaleString("pl-PL",{weekday:"long",hour:"2-digit",minute:"2-digit",day:"numeric",month:"long"});
  
  // --- WEATHER (Open-Meteo) ---
  try{
    const u=`https://api.open-meteo.com/v1/forecast?latitude=${loc.lat}&longitude=${loc.lon}&current=temperature_2m,wind_speed_10m,precipitation&daily=sunrise,sunset,moon_phase&timezone=${loc.tz}`;
    const j=await fetch(u).then(r=>r.json());
    const c=j.current; const d=j.daily;
    document.querySelector("#weather .pill:nth-child(1)").textContent=`ğŸŒ¡ï¸ ${c.temperature_2m.toFixed(1)}Â°C`;
    document.querySelector("#weather .pill:nth-child(2)").textContent=`ğŸ’¨ ${c.wind_speed_10m.toFixed(0)} km/h`;
    document.querySelector("#weather .pill:nth-child(3)").textContent=`ğŸŒ§ï¸ ${c.precipitation.toFixed(1)} mm`;
    document.getElementById("sunrise").textContent="ğŸŒ… "+d.sunrise[0].split("T")[1].slice(0,5);
    document.getElementById("sunset").textContent="ğŸŒ‡ "+d.sunset[0].split("T")[1].slice(0,5);
    const m=d.moon_phase[0];
    const phase=m<0.03?"New":m<0.25?"Waxing Crescent":m<0.26?"First Quarter":m<0.5?"Waxing Gibbous":m<0.51?"Full":m<0.75?"Waning Gibbous":m<0.76?"Last Quarter":"Waning Crescent";
    document.getElementById("moon").textContent="ğŸŒ™ "+phase;
  }catch(e){console.log("weather fail",e)}

  // --- HOLIDAYS next 3 days for selected countries ---
  const cts=[["ğŸ‡µğŸ‡±","PL"],["ğŸ‡©ğŸ‡ª","DE"],["ğŸ‡¦ğŸ‡¹","AT"],["ğŸ‡¨ğŸ‡­","CH"],["ğŸ‡¨ğŸ‡¿","CZ"],["ğŸ‡¸ğŸ‡°","SK"],["ğŸ‡²ğŸ‡¦","MA"],["ğŸ‡ºğŸ‡¸","US"],["ğŸ‡®ğŸ‡³","IN"],["ğŸ‡¨ğŸ‡³","CN"]];
  const now=new Date();const soon=new Date();soon.setDate(now.getDate()+3);
  const year=now.getFullYear();let html="";
  for(const [f,cc] of cts){
    try{
      const a=await fetch(`https://date.nager.at/api/v3/PublicHolidays/${year}/${cc}`).then(r=>r.json());
      const pick=a.filter(o=>{const d=new Date(o.date);return d>=now&&d<=soon});
      if(pick.length){html+=`<div><b>${f} ${cc}</b><ul style="margin:2px 0 8px 18px">`+
        pick.map(o=>`<li>${new Date(o.date).toLocaleDateString()} â€“ ${o.localName||o.name}</li>`).join("")+"</ul></div>";}
    }catch(e){/*ignore*/}
  }
  document.getElementById("holidays").innerHTML=html||"<small>No holidays in next 3 days.</small>";
})();
</script>
</body>
</html>
